# ==================== 视觉识别配置 ====================
# 可选值: ollama, openai, anthropic, disabled
VISION_PROVIDER=ollama

# 模型名称
# Ollama: llava, moondream, bakllava
# OpenAI: gpt-4o, gpt-4o-mini
# Anthropic: claude-sonnet-4-20250514, claude-haiku-3-20250506
VISION_MODEL=llava

# API 地址
# Ollama: http://localhost:11434
# OpenAI: https://api.openai.com/v1 (可选，默认使用官方API)
# Anthropic: https://api.anthropic.com/v1 (可选，默认使用官方API)
VISION_API_URL=

# API Key
# OpenAI: 设置 OPENAI_API_KEY 环境变量或直接设置 VISION_API_KEY
# Anthropic: 设置 ANTHROPIC_API_KEY 环境变量或直接设置 VISION_API_KEY
VISION_API_KEY=

# 识别参数
VISION_TEMPERATURE=0.1
VISION_MAX_TOKENS=1000

# ==================== 截图配置 ====================
# 是否启用截图
CAPTURE_ENABLED=true

# 截图间隔（毫秒），建议 30000（30秒）
CAPTURE_INTERVAL=30000

# 是否启用增量检测（只发送新增内容，节省 Token）
# 开启后会自动检测聊天区域，只在有新消息时发送给 LLM
CAPTURE_INCREMENTAL_DETECTION=true

# 截图前是否激活窗口（提到最前，确保不被遮挡）
CAPTURE_ACTIVATE_WINDOW=true

# 目标窗口名称（Windows 微信窗口标题）
CAPTURE_WINDOW_NAME=微信

# 是否保存截图到本地（用于调试）
CAPTURE_SAVE_SCREENSHOTS=false

# 截图保存目录
CAPTURE_SCREENSHOT_DIR=data/screenshots

# ==================== Web 服务器配置 ====================
WEB_PORT=3000
WEB_HOST=0.0.0.0
WEB_ENABLED=true

# ==================== 数据库配置 ====================
DATABASE_PATH=data/reynard.db

# ==================== Webhook 配置 ====================
WEBHOOK_URL=
WEBHOOK_ENABLED=false
WEBHOOK_BATCH_SIZE=10
WEBHOOK_BATCH_INTERVAL=5

# ==================== 监控配置 ====================
# 监听的群聊 ID 列表（留空则监听所有）
MONITORED_ROOMS=

# 日志级别（debug/info/warn/error）
LOG_LEVEL=info

# ==================== 巡逻配置 ====================
# 巡逻间隔（毫秒），建议 60000（1分钟），测试用 20000（20秒）
PATROL_INTERVAL=20000

# 每次巡逻目标之间的等待时间（毫秒）
PATROL_TARGET_DELAY=500

# 最大巡逻轮数（0 = 无限）
PATROL_MAX_ROUNDS=0

# 目标列表: "群名|分类,好友名|分类"
# 分类可选值: 联系人, 群聊, 功能
BOT_TARGETS=

# 问候消息（首次巡逻时发送）
BOT_GREETING_MESSAGE=Reynard 机器人已上线

# 是否在首次巡逻时发送问候
PATROL_GREETING_ENABLED=false

# ==================== OCR 配置 ====================
# OCR预处理：缩放倍数（建议 2-3）
OCR_RESIZE_SCALE=2

# OCR预处理：对比度增益（建议 1.0-1.5）
OCR_CONTRAST_GAIN=1.3

# OCR预处理：亮度偏移（负值增加对比度，建议 -50 到 0）
OCR_BRIGHTNESS_OFFSET=-20

# 搜索结果加载等待时间（毫秒），建议 1500-3000
OCR_SEARCH_LOAD_WAIT=2500

# ==================== VLM 分析周期 ====================
# VLM 分析周期间隔（毫秒），将巡逻截图拼合后发给 VLM
VLM_CYCLE_INTERVAL=60000

# 拼合图最大高度（像素），超过则等比缩小
VLM_MAX_IMAGE_HEIGHT=4000

# 处理后是否删除已分析的截图
VLM_CLEANUP_PROCESSED=true
